var FLIR={version:"2.0b2",options:{path:"",defaultStyle:null,ignoredEls:"BR,HR,IMG,INPUT,SELECT",bkgCheckForBlock:false,onreplacing:null,onreplaced:null,onreplacingchild:null,onreplacedchild:null},findEmbededFonts:false,dpi:96,flirElements:{},flirPlugins:[],isIE6:true,isIE:true,hoverEnabled:false,debug:false,init:function(a){if(typeof a!="undefined"){for(var b in a){this.options[b]=a[b]}}if(this.options.defaultStyle==null){this.options.defaultStyle=new FLIRStyle()}this.detectBrowser();this.calcDPI();if((this.findEmbededFonts=(typeof FLIR.discoverEmbededFonts=="function"))){this.discoverEmbededFonts()}this.hoverEnabled=(typeof this.addHover=="function");FLIR.pcall("init",arguments)},install:function(a){this.flirPlugins.push(a)},pcall:function(d,c){var a=c;for(var b=0;b<this.flirPlugins.length;b++){if(typeof this.flirPlugins[b][d]=="function"){var e=this.flirPlugins[b][d](a);if(typeof e=="undefined"){continue}if(typeof e=="boolean"&&e==false){return false}if(typeof e!="boolean"){a=c}}}var a=typeof a!="object"?[a]:a;if(a.length&&a[0]&&a[0].callee){return a[0]}else{return a}},prepare:function(f,b){if(!(args=FLIR.pcall("prepare",arguments))){return}f=args[0];if(f&&f.hasChildNodes()&&f.childNodes.length>1){for(var c=0;c<f.childNodes.length;c++){var e=f.childNodes[c];if(e&&e.nodeType==3){if(b){trimreg=c==0?/^\s+/g:/\s+$/g;e.innerHTML=e.innerHTML.replace(trimreg,"")}var d=document.createElement("SPAN");d.style.margin=d.style.padding=d.style.border="0";d.className="flir-span";d.flirSpan=true;if(e.nodeValue.match(/^[\n\r]+$/)){continue}var a=e.nodeValue.replace(/[\t\n\r]/g," ").replace(/\s\s+/g," ");d.innerHTML=!FLIR.isIE?a:e.nodeValue.replace(/^\s+|\s+$/g,"&nbsp;");f.replaceChild(d,e)}}}},replace:function(c,b){if(!(args=FLIR.pcall("replace",arguments))){return}c=args[0];b=args[1];if(!c||c.flirReplaced){return}if(!this.isFStyle(b)&&typeof b=="object"){b=new FLIRStyle(b)}else{if(!this.isFStyle(b)){b=this.options.defaultStyle}}if(typeof c=="string"){c=this.getElements(c)}if(typeof c.length!="undefined"){if(c.length==0){return}for(var a=0;a<c.length;a++){this.replace(c[a],b)}return}c.flirStyle=b;if(typeof FLIR.options.onreplacing=="function"){c=FLIR.options.onreplacing(c,b)}c.flirMainObj=true;this.saveObject(c);if(this.findEmbededFonts&&typeof this.embededFonts[b.getFont(c,FLIR.getStyle(c,"font-family"))]!="undefined"){return}FLIR.prepare(c);this._replace_tree(c,b);if(typeof FLIR.options.onreplaced=="function"){FLIR.options.onreplaced(c,b)}},_replace_tree:function(e,c){var d=!e.hasChildNodes()||(e.hasChildNodes()&&e.childNodes.length==1&&e.childNodes[0].nodeType==3)?[e]:e.childNodes;var a;for(var b=0;b<d.length;b++){a=d[b];if(typeof FLIR.options.onreplacingchild=="function"){a=FLIR.options.onreplacingchild(a,c)}if(!a.innerHTML||a.nodeType!=1){continue}if(FLIR.isIgnoredEl(a)){continue}if(a.flirReplaced){continue}if(FLIR.hoverEnabled&&a.nodeName=="A"&&!a.flirHasHover){FLIR.addHover(a)}if(a.hasChildNodes()&&(a.childNodes.length>1||a.childNodes[0].nodeType!=3)){FLIR.prepare(a);FLIR._replace_tree(a,c);continue}if(a.innerHTML==""){continue}var f=c.options.output;if(FLIR.isIE6&&(a.flirIE6PNG=(f=="png"||(f=="auto"&&FLIR.getStyle(a,"background-color")=="transparent")))){FLIR._Rimg(a,c,true)}else{if(c.replaceBackground){FLIR._Rbkg(a,c)}else{FLIR._Rimg(a,c)}}a.className+=" flir-replaced";a.flirReplaced=true;if(typeof FLIR.options.onreplacedchild=="function"){FLIR.options.onreplacedchild(e,c)}}},_Rbkg:function(e,d){if(!(args=FLIR.pcall("replaceBackground",arguments))){return}e=args[0];d=args[1];var c=this.saveObject(e);var a=d.URL(e);if(FLIR.options.bkgCheckForBlock){if(FLIR.getStyle(e,"display")!="block"){e.style.display="block"}}var b=new Image();b.onload=function(){FLIR.flirElements[c].style.width=this.width+"px";FLIR.flirElements[c].style.height=this.height+"px";if(FLIR.hoverEnabled&&d!=d.hoverStyle){var f=new Image();e.flirHoverURL=f.src=d.hoverStyle.URL(e)}};b.src=a;e.style.background='url("'+a.replace(/ /g,"%20")+'") no-repeat';e.flirOrig=a;e.oldTextIndent=e.style.textIndent;e.style.textIndent="-9999px"},_Rimg:function(f,e,d){if(!(args=FLIR.pcall("replaceMethodOverlay",arguments))){return}f=args[0];e=args[1];var c=this.saveObject(f);var a=document.createElement("IMG");var b=e.URL(f);a.alt=f.innerHTML;if(FLIR.hoverEnabled&&e!=e.hoverStyle){a.onload=function(){var g=new Image();f.flirHoverURL=g.src=e.hoverStyle.URL(f,a.alt)}}if(a.onerror){a.onerror=function(){var g=document.createElement("SPAN");g.innerHTML=a.alt;try{f.replaceChild(g,a)}catch(h){}}}a.flirImage=true;a.className="flir-image";a.style.border="none";if(d){a.src=this.options.path+"spacer.png";if(f.offsetWidth){a.style.width=f.offsetWidth+"px";a.style.height=f.offsetHeight+"px"}a.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="image")';f.flirOrig=b}else{a.src=b;f.flirOrig=a.src}f.innerHTML="";f.appendChild(a)},saveObject:function(a){if(typeof a.flirId=="undefined"){a.flirId=this.generateUID();this.flirElements[a.flirId]=a}return a.flirId},generateUID:function(){var a="flir-";if(typeof __flir_uid_count=="undefined"){__flir_uid_count=0}else{__flir_uid_count++}return a+__flir_uid_count},calcDPI:function(){if(screen.logicalXDPI){var b=parseInt(screen.logicalXDPI)}else{var d=document.cookie.match(/<dpi>(\d+)<\/dpi>/);if(d){this.dpi=d[1];return}var c=document.createElement("DIV");c.style.position="absolute";c.style.visibility="hidden";c.style.border=c.style.padding=c.style.margin="0";c.style.height=c.style.width="1in";document.body.appendChild(c);var b=parseInt(c.offsetHeight);document.body.removeChild(c);var a=new Date();a.setDate(new Date().getDate()+365);document.cookie="dpi=<dpi>"+this.dpi+"</dpi>;expires="+a.toGMTString()+";path=/"}if(b>0){this.dpi=b}},isIgnoredEl:function(a){return((","+this.options.ignoredEls+",").indexOf(","+a.nodeName+",")>-1)},sanitizeHTML:function(a){return a.replace(/<[^>]+>/g,"")},isFStyle:function(a){if(!a){return false}return(typeof a.cssMap!="undefined")}};__flirstyle_instances=0;function FLIRStyle(a,c){__flirstyle_instances++;this.uid=__flirstyle_instances;this.replaceBackground=false;this.hoverStyle=c&&FLIR.isFStyle(c)?c:this;this.options={};this.defaults={mode:"static",output:"auto",fixBaseline:false,hq:false,css:{}};this.cssMap={"background-color":"Background",color:"Color","font-family":"Font","font-size":"FontSize","letter-spacing":"Measurement","line-height":"LineHeight","text-align":"Default","font-stretch":"Default","font-style":"FontStyle","font-variant":"Default","font-weight":"Weight",opacity:"Default","text-decoration":"Default"};for(var b in this.defaults){this.options[b]=this.defaults[b]}if(a&&typeof a.css=="string"){a.css=this.parse_css_string(a.css)}this.loadopts(a)}FLIRStyle.prototype.loadopts=function(b){for(var c in this.cssMap){this.options.css[c]=b&&b.css&&typeof b.css[c]!="undefined"?b.css[c]:null}if(typeof this.loadopts_compat=="function"){b=this.loadopts_compat(b)}if(typeof b!="undefined"){for(var c in b){if(b[c]==null){continue}if(typeof this[c]!="undefined"){this[c]=b[c]}else{if(c=="css"){for(var a in b[c]){this.options[c][a]=b[c][a]}}else{this.options[c]=b[c]}}}}};FLIRStyle.prototype.parse_css_string=function(c){var d=c.split(";");var a={};var e;for(var b=0;b<d.length;b++){if(d[b].indexOf(":")<0){continue}e=d[b].split(":");a[e[0].replace(/^\s+|\s+$/,"")]=e[1].replace(/^\s+|\s+$/,"")}return a};FLIRStyle.prototype.URL=function(d){var c=(arguments[1]?arguments[1]:d.innerHTML);var b=this.options.css["text-transform"];if(b==null){b=FLIR.getStyle(d,"text-transform")}switch(b){case"capitalize":c=c.replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()});break;case"lowercase":c=c.toLowerCase();break;case"uppercase":c=c.toUpperCase().replace(/&[a-z0-9]+;/gi,function(e){return e.toLowerCase()});break}c=this.encodeText(c,d.flirIE6PNG);var a=FLIR.options.path+"generate.php?t="+c+"&h="+d.offsetHeight+"&w="+d.offsetWidth+"&c="+this.flattenCSS(d)+"&d="+FLIR.dpi+"&f="+this.serialize();if(FLIR.debug){a+="&rand="+(Math.random()*Math.random())}return a};FLIRStyle.prototype.encodeText=function(b,a){b=encodeURIComponent(b.replace(/&/g,"{*A}").replace(/\+/g,"{*P}").replace(/\(/g,"{*LP}").replace(/\)/g,"{*RP}"));if(a){b=escape(b)}return b};FLIRStyle.prototype.serialize=function(){var b="";for(var a in this.options){if(a=="css"||this.options[a]==this.defaults[a]){continue}b+=',"'+a+'":"'+this.options[a].toString().replace(/"/g,"'")+'"'}return encodeURIComponent("{"+b.substr(1)+"}")};FLIRStyle.prototype.flattenCSS=function(d){var a=this.copyObject(this.options.css);for(var c in this.cssMap){this.options.css[c]=this.get(d,c,this.cssMap[c])}var b="";for(var c in this.options.css){if(this.options.css[c]==null||typeof this.options.css[c]=="undefined"){this.options.css[c]=""}b+="|"+encodeURIComponent(this.options.css[c].toString().replace(/|/g,""))}b=b.substr(1);this.options.css=a;return b};FLIRStyle.prototype.get=function(g,a,d){var c="get"+d;while(g.flirSpan&&g!=document.body){g=FLIR.getParentNode(g)}var e=this.options.css[a];var f=!e||e==null?FLIR.getStyle(g,a):this.options.css[a];var b=typeof this[c]=="function"?this[c](g,f):f;return b=="normal"||b=="none"||b=="start"?"":b};FLIRStyle.prototype.getFontStyle=function(b,a){return(b.nodeName=="EM"||FLIR.getParentNode(b).nodeName=="EM"?"italic":a)=="italic"?"1":""};FLIRStyle.prototype.getBackground=function(d,c){if(this.options.output=="gif"&&c.search(/^(transparent|none)$/i)>-1){var b=FLIR.getParentNode(d);var a=FLIR.getStyle(b,"background-color");if(typeof __flirstyle_root_obj=="undefined"){__flirstyle_root_obj=FLIR.getParentNode(document.body)}while(a.search(/^(transparent|none)$/i)>-1&&b!=__flirstyle_root_obj){b=FLIR.getParentNode(b);a=FLIR.getStyle(b,"background-color")}return this.getColor(d,a)}else{return this.getColor(d,c)}};FLIRStyle.prototype.getWeight=function(c,b){var a=c.nodeName=="STRONG"||FLIR.getParentNode(c).nodeName=="STRONG"?"bold":b;switch(a.toString()){case"100":case"200":case"300":case"lighter":return"-1";case"400":case"normal":return"";case"500":case"600":case"700":case"bold":return"1";case"800":case"900":case"bolder":return"2"}};FLIRStyle.prototype.getLineHeight=function(c,b){var a=this.getMeasurement(c,b)/c.flirFontSize;return Math.round((a*100000))/100000};FLIRStyle.prototype.getFont=function(b,a){if(a.indexOf(",")){a=a.split(",")[0]}return a.replace(/['"]/g,"").toLowerCase()};FLIRStyle.prototype.getColor=function(b,a){switch(a){case"transparent":case"none":return"";default:if(a.substr(0,1)=="#"){a=a.substr(1)}return a.replace(/['"\(\) ]|rgba?/g,"").toLowerCase()}};FLIRStyle.prototype.getFontSize=function(o,val){var px=this.getMeasurement(o,val,true);var prepx=px;if("*/+-".indexOf(val[0])>-1){try{px=Math.round((parseFloat(eval(px.toString().concat(val))))*10000)/10000}catch(err){px=16}}o.flirFontSize=px;return px};FLIRStyle.prototype.getMeasurement=function(g,f,d){var c,b,a;if(f=="normal"||f=="none"){return""}if(f.indexOf("px")>-1){c=Math.round(parseFloat(f))}else{if(f.indexOf("pt")>-1){var e=parseFloat(f);c=e/(72/FLIR.dpi)}else{if((b=(f.indexOf("em")>-1))||(a=(f.indexOf("%")>-1))){if(!g.flirFontSize){var h=document.createElement("DIV");h.style.padding=h.style.border="0";h.style.position="absolute";h.style.visibility="hidden";if(d){h.style.lineHeight="100%"}h.innerHTML="FlirTest";g.appendChild(h);c=h.offsetHeight;g.removeChild(h)}else{c=g.flirFontSize}}}}return c};FLIRStyle.prototype.copyObject=function(b){var c={};for(var a in b){c[a]=b[a]}return c};FLIRStyle.prototype.toString=function(){return this.uid};FLIR.addHover=function(a){if(!(args=FLIR.pcall("addHover",arguments))){return}a=args[0];a.flirHasHover=true;if(a.addEventListener){a.addEventListener("mouseover",FLIR.hover,false);a.addEventListener("mouseout",FLIR.hover,false)}else{if(a.attachEvent){a.attachEvent("onmouseover",function(){FLIR.hover(window.event)});a.attachEvent("onmouseout",function(){FLIR.hover(window.event)})}}};FLIR.flirIERepObj=[];FLIR.flirIEHovEls=[];FLIR.flirIEHovStyles=[];FLIR.hover=function(m){var b=FLIR.evsrc(m);var p=b;var s=b.flirHasHover;var j=b;var n=(m.type=="mouseover");while(b!=document.body&&!b.flirMainObj){b=FLIR.getParentNode(b);if(!s){s=b.flirHasHover;j=b}}if(b==document.body){return}var c=b.flirStyle;if(n&&c!=c.hoverStyle){c=c.hoverStyle}if(!(args=FLIR.pcall("hover",[n,p,b,j]))){return}n=args[0];p=args[1];b=args[2];j=args[3];var k=FLIR.getChildren(j);if(k.length==0||(k.length==1&&(k[0].flirImage||k[0].flirHasHover))){k=[j]}else{if(k.length==1&&!FLIR.isIgnoredEl(k[0])){var f=FLIR.getChildren(k[0]);if(f.length>0){if((f.length==1&&!f[0].flirImage)||f.length>1){k=f}}}}var q;for(var h=0;h<k.length;h++){q=k[h];if(q.nodeName=="IMG"){continue}if(!q.innerHTML){continue}if(FLIR.isIE){var r=FLIR.flirIEHovEls.length;FLIR.flirIERepObj[r]=q;FLIR.flirIEHovStyles[r]=c;var l=c.options.output;if(FLIR.isIE6&&(q.flirIE6PNG=(l=="png"||(l=="auto"&&FLIR.getStyle(q,"background-color")=="transparent")))){FLIR.flirIEHovEls[r]=q.flirImage?q:FLIR.getChildren(q)[0];setTimeout("FLIR.flirIEHovEls["+r+"].style.filter = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"'+FLIR.flirIEHovStyles["+r+"].URL(FLIR.flirIERepObj["+r+"], FLIR.flirIEHovEls["+r+'].alt)+\'", sizingMethod="image")\';  ',0)}else{if(c.replaceBackground&&FLIR.getStyle(q,"display")=="block"){FLIR.flirIEHovEls[r]=q;setTimeout("FLIR.flirIERepObj["+r+'].style.background = "url("+('+n+" ? FLIR.flirIEHovStyles["+r+"].URL(FLIR.flirIERepObj["+r+"]) : FLIR.flirIERepObj["+r+'].flirOrig)+") no-repeat";',0)}else{FLIR.flirIEHovEls[r]=q.flirImage?q:FLIR.getChildren(q)[0];if(!FLIR.flirIEHovEls[r].flirOrigWidth){FLIR.flirIEHovEls[r].flirOrigWidth=FLIR.flirIEHovEls[r].width;FLIR.flirIEHovEls[r].flirOrigHeight=FLIR.flirIEHovEls[r].height}var d="FLIR.flirIEHovEls["+r+"].src = "+n+" ? FLIR.flirIEHovStyles["+r+"].URL(FLIR.flirIERepObj["+r+"], FLIR.flirIEHovEls["+r+"].alt) : FLIR.flirIERepObj["+r+"].flirOrig;";d+="FLIR.flirIEHovEls["+r+"].onload = function() { ";if(n&&!FLIR.flirIEHovEls[r].flirHoverWidth){d+="		FLIR.flirIEHovEls["+r+"].flirHoverWidth = this.width; ";d+="		FLIR.flirIEHovEls["+r+"].flirHoverHeight = this.height; "}d+="	this.style.width = FLIR.flirIEHovEls["+r+"]."+(n?"flirHoverWidth":"flirOrigWidth")+'+"px"; ';d+="	this.style.height = FLIR.flirIEHovEls["+r+"]."+(n?"flirHoverHeight":"flirOrigHeight")+'+"px"; ';d+="}; ";setTimeout(d,0)}}}else{if(c.replaceBackground){var a=q.flirHoverURL?q.flirHoverURL:c.URL(q);q.style.background="url("+(n?a:q.flirOrig)+") no-repeat"}else{var g=q.flirImage?q:FLIR.getChildren(q)[0];var a=q.flirHoverURL?q.flirHoverURL:c.URL(q,g.alt);g.src=n?a:q.flirOrig}}}};FLIR.detectBrowser=function(){FLIR.isIE=(navigator.userAgent.toLowerCase().indexOf("msie")>-1&&!window.opera);FLIR.isIE6=(typeof document.body.style.maxHeight=="undefined")};FLIR.getElements=function(r){var q=[];if(document.querySelectorAll){var e=false;try{q=document.querySelectorAll(r);e=true}catch(f){e=false}if(e){return q}}var i,n,l,j,r,d,h,o,k;d=r;o=false;if(d.indexOf(" ")>-1){var g=d.split(" ");d=g[0];o=g[1]}else{if(d.substr(0,1)=="#"){return document.getElementById(d.substr(1))}}var c=false;if(d.indexOf("#")>-1){c=d.split("#")[1];r=d.split("#")[0]}var m=false;if(d.indexOf(".")>-1){m=d.split(".")[1];r=d.split(".")[0]}i=document.getElementsByTagName(r);for(var a=0;a<i.length;a++){if(i[a].nodeType!=1){continue}h=false;l=i[a].className?i[a].className:"";if(c&&i[a].id&&i[a].id==c){h=true}if(m&&FLIR.hasClass(i[a],m)){h=true}if(!c&&!m){h=true}if(!h){continue}n=false!=o?i[a].getElementsByTagName(o):[i[a]];for(var b=0;b<n.length;b++){k=n[b];q.push(k)}}return q};FLIR.getStyle=function(a,c){if(a.currentStyle){if(c.indexOf("-")>-1){c=c.split("-")[0]+c.split("-")[1].substr(0,1).toUpperCase()+c.split("-")[1].substr(1)}var b=a.currentStyle[c]}else{if(window.getComputedStyle){var b=document.defaultView.getComputedStyle(a,"").getPropertyValue(c)}}return b};FLIR.getChildren=function(c){var b=[];if(c&&c.hasChildNodes()){for(var a in c.childNodes){if(c.childNodes[a]&&c.childNodes[a].nodeType==1){b[b.length]=c.childNodes[a]}}}return b};FLIR.getParentNode=function(b){var a=b.parentNode;while(a!=document&&a.nodeType!=1){a=a.parentNode}return a};FLIR.hasClass=function(a,b){return(a&&a.className&&a.className.indexOf(b)>-1)};FLIR.evsrc=function(a){var b;if(a.target){b=a.target}else{if(a.srcElement){b=a.srcElement}}if(b.nodeType==3){b=b.parentNode}return b};FLIRStyle.prototype.loadopts_compat=function(b){if(!b){return}if(!b.css){b.css={}}b.fixedBaseline=b.realFontHeight?true:false;var a={cBackground:"background-color",cColor:"color",cFont:"font-family",cSize:"font-size",cSpacing:"letter-spacing",cLine:"line-height",cAlign:"text-align",cTransform:"text-transform",cStretch:"font-stretch",cFontStyle:"font-style",cVariant:"font-variant",cWeight:"font-weight",cOpacity:"opacity",cDecoration:"text-decoration"};var d;for(var c in a){if(typeof b[c]!="undefined"){switch(c){default:d=b[c];break;case"cSize":d=b[c]+"px";break;case"cColor":case"cBackground":d="#"+b[c];break}b.css[a[c]]=d;b[c]=null}}return b};FLIR.auto=function(a){FLIR.replace((!a?["h1","h2","h3","h4","h5"]:(a.indexOf&&a.indexOf(",")>-1?a.split(","):a)))};